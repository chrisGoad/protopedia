<head>
<title>Prototype Jungle</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<link rel="stylesheet" type="text/css"  href="/style.css"> 
</head>
<body style="background-color:#eeeeee">

  
  
<script src="/js/util.js"></script>

<script src="/js/om.js"></script>
<script src="/js/instantiate.js"></script>
<script src="/js/externalize.js"></script>
<script src="/js/jquery.js"></script>
<script src="/js/jqprotos.js"></script>

<script src="/js/geom.js"></script>
<script src="/js/draw.js"></script>
<script src="/js/shapes.js"></script>
<script src="/js/page.js"></script>

<script src="/js/error.js"></script>

<script>
    
    

(function (){
 
  var om = __pj__.om;
  var draw = __pj__.draw;
  var page = __pj__.page
  
  page.elementsToHideOnError = [];

function buildError(url) {
  if (!buildDone) {
   __pj__.page.genError("<span style='color:red'>Error</span>: the build from <a href='"+url+"'>"+url+"</a> failed, either because the file is missing, or because there was a JavaScript error.");
  }
}

var buildTimeout = 20000;

var buildDone;
  
  function doTheBuild(url) {
    buildDone = false;
    setTimeout(function () {buildError(url);} ,buildTimeout);
    om.doneCallback = function (built,local) {
      buildDone = true;
      built.__source__ = url;
      var whenSaved = function (nm,dord) {
        var rs = $('#results');
        rs.empty();
        if (nm=='busy') {
          rs.append('<p>The site is too busy to do the build. Please try again later.</p>');
        } else {
          rs.append(om.mkCapLink('The build file:',url));
          rs.append(om.mkLinks(nm,dord));
        }
      }
      if (local) {
        om.save(built,whenSaved);
      } else {
        om.s3Save(built,whenSaved,false);  // no need to remove computed
      }
    }
    om.getScript(url);
  }
  
  $('document').ready(function () {
    __pj__.genTopbar($('#topbar'),1);
    $('#buildButton').click(function () {
      var inp = $('#buildInput');
      var vl = inp.attr('value');
      page.elementsToHideOnError.push($('#mainDiv'));
      doTheBuild(vl);
    });
    $('#exampleButton').click(function () {
      var inp = $('#buildInput');
      vl = 'http://'+(location.host)+'/gen/examples/twoRectangles.js';
      inp.attr('value',vl);
      //doTheBuild(vl);
    });
  });
  
})();
  
  
  

</script>
<div id="outerContainer"> 
  <div id="topbar"></div>
  <div id="error"></div>
  <div id="mainDiv">
    <p> You can write your own JavaScript code to create items to which these tools apply. See the technical documentation. Then use this page
    to perform the builds. </p>
    <p> Source URL for build (anywhere on the web): <input id="buildInput" type="text" style="margin-left:20px;width:400px"></input></p>
    <div class="button" id="buildButton">Go</div>
        <div class="button" id="exampleButton">Show Example</div>

      <div id="results"></div>

  </div>
<!--
http://prototypejungle.org/gen/examples/twoRectangles.js
-->
</div>
</body>
</html>

    