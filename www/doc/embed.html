<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="description" content="UI-adjustable prototype chains for infographics">
<title>PrototypeJungle</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<link rel="stylesheet" type="text/css"  href="/style.css">
</head>
<body>


<script src="http://{{domain}}/js/pjtopbar-{{pjtopbar_version}}.js"></script>

<script>
$('document').ready(function () {
  pj.om.checkSession(function (rs) {
    pj.ui.genTopbar($('#topbar'),{includeTitle:1});
  });
});
</script>
  

<div id="outerContainer"> 
  <div id="topbar">
     <div id="topbarOuter" style="padding-bottom:30px"><span class="mainTitle">PrototypeJungle</span>
        <div id = "topbarInner" style="float:right"></div>
    </div>
  </div>

  
<div class="pageTitle">Programmatic Data Binding</div>



<p>Items can be loaded into a web page and bound to data with code such as this: (also available at
<a href="http://jsfiddle.net/prototypejungle/zg4qa883">jsfiddle</a>).</p>

<pre>
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;body&gt;

&lt;script type="text/javascript" src="http://prototypejungle.org.s3.amazonaws.com/js/pjcs-0.9.0.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="http://prototypejungle.org.s3.amazonaws.com/js/pjdom-0.9.0.js"&gt;&lt;/script&gt;
&lt;script&gt;
var data =
  {"fields":[{"id":"year","type":"number","role":"domain"},
             {"id":"value","type":"number","role":"range"},
              {"id":"category","type":"string"}],
   "elements":[[1980,291,"Imports"],[1980,272,"Exports"],
               [1990,616,"Imports"],[1990,535,"Exports"],
               [2000,1450,"Imports"],[2000,1073,"Exports"],
               [2010,2337,"Imports"],[2010,1842,"Exports"]]};
   
document.addEventListener('DOMContentLoaded',function () {
  
  var root = pj.svg.Root.mk(document.getElementById("svgDiv"));
  pj.om.install("http://prototypejungle.org/sys/repo0/chart/variants/Bar1/redblack",function (err,item) {
    root.set("contents",item);
    item.setData(data);
    root.fitContents();
 });

});

&lt;/script&gt;
&lt;div id="svgDiv" style="width:800px;height:500px;border:solid thin black"&gt;&lt;/div&gt;
&lt;/body>
&lt;/html>
</pre>

<p>The first artument to install should be the URL of the variant that you saved off, which you can discover from the share button.</p>

<div class="section" id="loadData">1. Loading Data from a URL</div>

<p>As seen from the above example, setData does the binding of data to an item.  The following code fragment loads and binds data
programmatically:  </p>

<pre>
    
  var root = pj.svg.Root.mk(document.getElementById("svgDiv"));
  pj.om.install("http://prototypejungle.org/sys/repo0/chart/variants/Bar1/redblack",function (err,item) {
    root.set("contents",item);
    pj.dat.loadData("http://prototypejungle.org/sys/repo0/data/trade_balance.js",function (err,rs) {
      item.setData(rs);
      root.fitContents();
    
 });



</pre>
<p>  Using this primitive, you 
could do such things as programmatically load and display data at intervals from a changing data source.</p>


</div>
</body>
</html>