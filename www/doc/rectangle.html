<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="description" content="An Open Repository of Prototype Structures for the Visual Domain">
<title>ProtoPedia</title>
<link rel="stylesheet" type="text/css"  href="/style.css"/>
<link rel="stylesheet" type="text/css"  href="spectrum.css"/>
<link rel="icon" href="/images/favicon.ico?v18" />
</head>
<body style="background-color:white;font-size:14pt">
<div id="outerContainer">  
  <div id="topbar"> 
     <div id="topbarOuter" style="padding-bottom:0px"><a href="/"><span style="position:relative;top:-10px" class="mainTitle">ProtoPedia </span></a>
         <img style ="position:relative;border:none;top:0px;left:20px;" alt="images/logo_alt.html" src="/images/logo3.svg"  width="60" height="25"/>
         <div id = "topbarInner" style="position:relative;float:right;top:0px">
                     <a href="/draw.html?source=(sys)/forMainPage/spiralLogo6.item&intro=tutorial_index&fit=0.7" class="ubutton">Tutorial</a>
 <a href="/draw.html" class="ubutton">Draw</a> 
          <a href="/code.html" class="ubutton">Code Editor</a> 
            <a href="/text.html" class="ubutton">Text Editor</a> 
         <a href="/doc/code.html" class="ubutton">Coding Guide</a> 
          <a href="/doc/about.html" class="ubutton">About</a>
           <a id ="signInButton" style="display:none" href="/sign_in.html" class="ubutton">Sign In</a>
           <a id="accountButton" style="display:none" href="/account.html" class="ubutton">Account</a>      
         </div> 
    </div>
  </div>
  <div id="innerContainer" style="margin-top:10px">
   
<p>This is the code which implements the rectangle shape, with links.</p>
<hr>
<p style="padding:5px"></p><pre class="code">
pj.require(function () {

var item = dom.SvgElement.mk('<rect/>');

/* adjustable parameters */
item.width = 50;
item.height = 35;
item.fill = 'transparent';
item.stroke = 'black';
item['stroke-width'] = 1;
/*end adjustable parameters*/

item.adjustable = true;
item.draggable = true;
item.role = 'vertex';
</pre>

<p style="padding-left:20px;padding-bottom:20px"> A rectangle plays the <a href="/doc/code.html#roles">role</a> of a vertex in graphs. </p>
<hr>
<p style="padding:5px"></p><pre class="code">
item.<a href="/doc/code.html#setDomAttributes">setDomAttributes</a> =  function (element) {
  element.setAttribute('x',-0.5*this.width);
  element.setAttribute('y',-0.5*this.height);
}
</pre>
<hr>
<p style="padding:5px"></p><pre class="code">
ui.installRectanglePeripheryOps(item);
</pre>
<p style="padding-left:20px;padding-bottom:20px">This  installs the functionality needed for management of arrows connected to the rectangle; in particular, for dragging the arrow around so
as to maintain the connection. <a href="https://github.com/chrisGoad/protopedia/blob/master/js/ui/periphery_ops.js">Here</a> is the relevant code.
</p>
<hr/>
<p style="padding:5px"></p><pre class="code">
item.transferState = function (src,own) { 
  pj.setProperties(this,src,ui.stdTransferredProperties,own);
}
</pre>
<p style="padding-left:20px;padding-bottom:20px"> When the rectangle is swapped for some other shape, <a href="/doc/code.html#transferState">this</a> handles transferring the rectangle's state to that new shape.
</p>
<hr/>
return item;
});
</pre>
  </div>
</div>
</body>
</html>
